(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,function(t,e,i){t.exports={item:"CartItem_item__3JrZY",details:"CartItem_details__2LKQj",quantity:"CartItem_quantity__l5gsp",price:"CartItem_price__fbA3H",itemprice:"CartItem_itemprice__1TUYc",actions:"CartItem_actions__1PiVo"}},,,,,,,,function(t,e,i){t.exports={notification:"Notification_notification__2I75D",error:"Notification_error__GASTn",success:"Notification_success__3at5_"}},,,,function(t,e,i){t.exports={button:"CartButton_button__3r8sU",badge:"CartButton_badge__18JYi"}},,,function(t,e,i){t.exports={card:"Card_card__3Douz"}},function(t,e,i){t.exports={cart:"Cart_cart__1-XEr"}},function(t,e,i){t.exports={header:"MainHeader_header__Yud19"}},function(t,e,i){t.exports={form:"Form_form__aCeeC"}},,,,,function(t,e,i){},,,,,,,function(t,e,i){"use strict";i.r(e);var c=i(8),n=i.n(c),a=(i(26),i(1)),r=i(2),s=i(18),o=i.n(s),u=i(0),l=function(t){return Object(u.jsx)("section",{className:"".concat(o.a.card," ").concat(t.className?t.className:""),children:t.children})},d=i(19),j=i.n(d),b=i(3),f=i.n(b),m=i(4),h=Object(m.b)({name:"cart",initialState:{items:[],totalQuantity:0},reducers:{addItemToCart:function(t,e){var i=e.payload,c=t.items.find((function(t){return t.id===i.id}));t.totalQuantity++,c?(c.quantity++,c.totalPrice=c.totalPrice+i.price):t.items.push({id:i.id,price:+i.price,quantity:1,totalPrice:+i.price,title:i.title})},removeItemFormCart:function(t,e){var i=e.payload,c=t.items.find((function(t){return t.id===i}));t.totalQuantity--,c.totalPrice=c.totalPrice-c.price,1===c.quantity?t.items=t.items.filter((function(t){return t.id!==i})):c.quantity--}}}),O=h.actions,p=h,x=function(t){var e=Object(r.b)(),i=t.item,c=i.title,n=i.quantity,a=i.total,s=i.price,o=i.id;return Object(u.jsxs)("li",{className:f.a.item,children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("h3",{children:c}),Object(u.jsxs)("div",{className:f.a.price,children:["$",a," ",Object(u.jsxs)("span",{className:f.a.itemprice,children:["($",s,"/item)"]})]})]}),Object(u.jsxs)("div",{className:f.a.details,children:[Object(u.jsxs)("div",{className:f.a.quantity,children:["x ",Object(u.jsx)("span",{children:n})]}),Object(u.jsxs)("div",{className:f.a.actions,children:[Object(u.jsx)("button",{onClick:function(){e(O.removeItemFormCart(o))},children:"-"}),Object(u.jsx)("button",{onClick:function(){e(O.addItemToCart({id:o,title:c,price:s}))},children:"+"})]})]})]})},_=function(t){var e=Object(r.c)((function(t){return t.cart.items}));return console.log(e),Object(u.jsxs)(l,{className:j.a.cart,children:[Object(u.jsx)("h2",{children:"Your Shopping Cart"}),Object(u.jsx)("ul",{children:e.map((function(t){return Object(u.jsx)(x,{item:{id:t.id,title:t.title,quantity:t.quantity,total:t.totalPrice,price:t.price}},t.id)}))})]})},g=Object(m.b)({name:"ui",initialState:{cartIsVisible:!1,notification:null},reducers:{toggle:function(t){t.cartIsVisible=!t.cartIsVisible},showNotification:function(t,e){t.notification={status:e.payload.status,title:e.payload.title,message:e.payload.message}},hideNotification:function(t){t.notification=null}}}),v=g.actions,y=g,C=i(15),N=i.n(C),I=function(t){var e=Object(r.c)((function(t){return t.cart.totalQuantity})),i=Object(r.b)();return Object(u.jsxs)("button",{className:N.a.button,onClick:function(){i(v.toggle())},children:[Object(u.jsx)("span",{children:"My Cart"}),Object(u.jsx)("span",{className:N.a.badge,children:e})]})},S=i(20),q=i.n(S),T=function(t){return Object(u.jsxs)("header",{className:q.a.header,children:[Object(u.jsx)("h1",{children:"ReduxCart"}),Object(u.jsx)("nav",{children:Object(u.jsx)("ul",{children:Object(u.jsx)("li",{children:Object(u.jsx)(I,{})})})})]})},P=function(t){return Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)(T,{}),Object(u.jsx)("main",{children:t.children})]})},w=i(10),F=i(5),k=i(7),E=i(21),Q=i.n(E),J="https://cart-3462f-default-rtdb.firebaseio.com/",V=function(){return function(t){fetch("".concat(J,"/cart.json")).then((function(t){return t.json()})).then((function(e){for(var i in e)t(O.addItemToCart({id:i,title:e[i].title,price:+e[i].price}))}))}},Y=function(){var t=Object(r.b)(),e=Object(a.useState)({title:"",price:""}),i=Object(k.a)(e,2),c=i[0],n=i[1],s=function(t){var e=t.target.value;n(Object(F.a)(Object(F.a)({},c),{},Object(w.a)({id:Math.random().toString()},t.target.name,e)))};return Object(u.jsx)("section",{className:Q.a.form,children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(t){return function(e){e(v.showNotification({status:"pending",title:"Sending...",message:"Sending data o cart !"})),fetch("".concat(J,"/cart.json"),{method:"POST",body:JSON.stringify(t)}).then((function(t){if(!t.ok)throw new Error("Sending cart data failed");return e(v.showNotification({status:"success",title:"Success !",message:"Sent cart data successfully !"})),t.json()})).then((function(t){})).catch((function(t){e(v.showNotification({status:"error",title:"Error !",message:"Sending cart data failed !"}))}))}}(c)),t(V()),n({title:"",price:""})},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"title",children:"Title"}),Object(u.jsx)("input",{type:"text",name:"title",onChange:s,id:"title",value:c.name})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"price",children:"Price"}),Object(u.jsx)("input",{type:"number",name:"price",onChange:s,id:"price",value:c.price})]}),Object(u.jsx)("button",{children:"Add To Cart"})]})})},A=i(11),B=i.n(A),D=function(t){var e="";"error"===t.status&&(e=B.a.error),"success"===t.status&&(e=B.a.success);var i="".concat(B.a.notification," ").concat(e);return Object(u.jsxs)("section",{className:i,children:[Object(u.jsx)("h2",{children:t.title}),Object(u.jsx)("p",{children:t.message})]})};var M=function(){var t=Object(r.b)(),e=Object(r.c)((function(t){return t.ui.cartIsVisible})),i=Object(r.c)((function(t){return t.ui.notification}));return Object(r.c)((function(t){return t.cart.totalQuantity})),Object(a.useEffect)((function(){var e;return i&&(e=setTimeout((function(){t(v.hideNotification())}),3e3)),function(){clearTimeout(e)}}),[i]),Object(a.useEffect)((function(){t(V())}),[]),Object(u.jsxs)(u.Fragment,{children:[i&&Object(u.jsx)(D,{status:i.status,title:i.title,message:i.message}),Object(u.jsxs)(P,{children:[e&&Object(u.jsx)(_,{}),Object(u.jsx)(Y,{})]})]})},H=Object(m.a)({reducer:{ui:y.reducer,cart:p.reducer}});n.a.render(Object(u.jsx)(r.a,{store:H,children:Object(u.jsx)(M,{})}),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.85e90547.chunk.js.map